!function t(e,i,r){function n(a,s){if(!i[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return n(i?i:t)},c,c.exports,t,e,i,r)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(t,e,i){function r(t,e){return this instanceof r?(this.x=t||0,void(this.y=e||0)):new r(t,e)}function n(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function o(t){return t*s}function a(t){return t/s}i=e.exports=r,r.fromArray=function(t){return new r(t[0]||0,t[1]||0)},r.fromObject=function(t){return new r(t.x||0,t.y||0)},r.prototype.addX=function(t){return this.x+=t.x,this},r.prototype.addY=function(t){return this.y+=t.y,this},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},r.prototype.addScalar=function(t){return this.x+=t,this.y+=t,this},r.prototype.addScalarX=function(t){return this.x+=t,this},r.prototype.addScalarY=function(t){return this.y+=t,this},r.prototype.subtractX=function(t){return this.x-=t.x,this},r.prototype.subtractY=function(t){return this.y-=t.y,this},r.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},r.prototype.subtractScalar=function(t){return this.x-=t,this.y-=t,this},r.prototype.subtractScalarX=function(t){return this.x-=t,this},r.prototype.subtractScalarY=function(t){return this.y-=t,this},r.prototype.divideX=function(t){return this.x/=t.x,this},r.prototype.divideY=function(t){return this.y/=t.y,this},r.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},r.prototype.divideScalar=function(t){return 0!==t?(this.x/=t,this.y/=t):(this.x=0,this.y=0),this},r.prototype.divideScalarX=function(t){return 0!==t?this.x/=t:this.x=0,this},r.prototype.divideScalarY=function(t){return 0!==t?this.y/=t:this.y=0,this},r.prototype.invertX=function(){return this.x*=-1,this},r.prototype.invertY=function(){return this.y*=-1,this},r.prototype.invert=function(){return this.invertX(),this.invertY(),this},r.prototype.multiplyX=function(t){return this.x*=t.x,this},r.prototype.multiplyY=function(t){return this.y*=t.y,this},r.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},r.prototype.multiplyScalar=function(t){return this.x*=t,this.y*=t,this},r.prototype.multiplyScalarX=function(t){return this.x*=t,this},r.prototype.multiplyScalarY=function(t){return this.y*=t,this},r.prototype.normalize=function(){var t=this.length();return 0===t?(this.x=1,this.y=0):this.divide(r(t,t)),this},r.prototype.norm=r.prototype.normalize,r.prototype.limit=function(t,e){return Math.abs(this.x)>t&&(this.x*=e),Math.abs(this.y)>t&&(this.y*=e),this},r.prototype.randomize=function(t,e){return this.randomizeX(t,e),this.randomizeY(t,e),this},r.prototype.randomizeX=function(t,e){var i=Math.min(t.x,e.x),r=Math.max(t.x,e.x);return this.x=n(i,r),this},r.prototype.randomizeY=function(t,e){var i=Math.min(t.y,e.y),r=Math.max(t.y,e.y);return this.y=n(i,r),this},r.prototype.randomizeAny=function(t,e){return Math.round(Math.random())?this.randomizeX(t,e):this.randomizeY(t,e),this},r.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},r.prototype.toFixed=function(t){return"undefined"==typeof t&&(t=8),this.x=this.x.toFixed(t),this.y=this.y.toFixed(t),this},r.prototype.mixX=function(t,e){return"undefined"==typeof e&&(e=.5),this.x=(1-e)*this.x+e*t.x,this},r.prototype.mixY=function(t,e){return"undefined"==typeof e&&(e=.5),this.y=(1-e)*this.y+e*t.y,this},r.prototype.mix=function(t,e){return this.mixX(t,e),this.mixY(t,e),this},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.copyX=function(t){return this.x=t.x,this},r.prototype.copyY=function(t){return this.y=t.y,this},r.prototype.copy=function(t){return this.copyX(t),this.copyY(t),this},r.prototype.zero=function(){return this.x=this.y=0,this},r.prototype.dot=function(t){return this.x*t.x+this.y*t.y},r.prototype.cross=function(t){return this.x*t.y-this.y*t.x},r.prototype.projectOnto=function(t){var e=(this.x*t.x+this.y*t.y)/(t.x*t.x+t.y*t.y);return this.x=e*t.x,this.y=e*t.y,this},r.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},r.prototype.horizontalAngleDeg=function(){return o(this.horizontalAngle())},r.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},r.prototype.verticalAngleDeg=function(){return o(this.verticalAngle())},r.prototype.angle=r.prototype.horizontalAngle,r.prototype.angleDeg=r.prototype.horizontalAngleDeg,r.prototype.direction=r.prototype.horizontalAngle,r.prototype.rotate=function(t){var e=this.x*Math.cos(t)-this.y*Math.sin(t),i=this.x*Math.sin(t)+this.y*Math.cos(t);return this.x=e,this.y=i,this},r.prototype.rotateDeg=function(t){return t=a(t),this.rotate(t)},r.prototype.rotateTo=function(t){return this.rotate(t-this.angle())},r.prototype.rotateToDeg=function(t){return t=a(t),this.rotateTo(t)},r.prototype.rotateBy=function(t){var e=this.angle()+t;return this.rotate(e)},r.prototype.rotateByDeg=function(t){return t=a(t),this.rotateBy(t)},r.prototype.distanceX=function(t){return this.x-t.x},r.prototype.absDistanceX=function(t){return Math.abs(this.distanceX(t))},r.prototype.distanceY=function(t){return this.y-t.y},r.prototype.absDistanceY=function(t){return Math.abs(this.distanceY(t))},r.prototype.distance=function(t){return Math.sqrt(this.distanceSq(t))},r.prototype.distanceSq=function(t){var e=this.distanceX(t),i=this.distanceY(t);return e*e+i*i},r.prototype.length=function(){return Math.sqrt(this.lengthSq())},r.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},r.prototype.magnitude=r.prototype.length,r.prototype.isZero=function(){return 0===this.x&&0===this.y},r.prototype.isEqualTo=function(t){return this.x===t.x&&this.y===t.y},r.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},r.prototype.toArray=function(){return[this.x,this.y]},r.prototype.toObject=function(){return{x:this.x,y:this.y}};var s=180/Math.PI},{}],2:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,i){r(this,t),this._lowerLeft=e,this._upperRight=i,this._calculateDimensions()}return n(t,[{key:"_calculateDimensions",value:function(){this._dimensions=this._upperRight.clone().subtract(this._lowerLeft)}},{key:"add",value:function(t){this._lowerLeft.add(t),this._upperRight.add(t)}},{key:"subtract",value:function(t){this._lowerLeft.subtract(t),this._upperRight.subtract(t)}},{key:"collisionWith",value:function(t){return!(this._upperRight.x<t._lowerLeft.x||t._upperRight.x<this._lowerLeft.x||this._lowerLeft.y>t._upperRight.y||t._lowerLeft.y>this._upperRight.y)}},{key:"position",set:function(t){var e=t.clone().subtract(this._lowerLeft);this._lowerLeft=t,this._upperRight.add(e)},get:function(){return this._lowerLeft}},{key:"lowerLeft",set:function(t){this._lowerLeft=t,this._calculateDimensions()},get:function(){return this._lowerLeft}},{key:"upperRight",set:function(t){this._upperRight=t,this._calculateDimensions()},get:function(){return this._upperRight}},{key:"width",get:function(){return this._dimensions.x}},{key:"height",get:function(){return this._dimensions.y}},{key:"dimensions",get:function(){return this._dimensions.clone()}}]),t}();i.default=o},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.ASPECT_RATIO=16/9,i.UNITS_TALL=20,i.SIMULATION_TIMESTEP=10},{}],4:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=t("../aabb"),s=r(a),u=t("victor"),h=r(u),c=t("../physics-body"),l=r(c),y=function(){function t(e){n(this,t),this.origin=e,this.physicsBody=new l.default(new s.default(e,(0,h.default)(e.x+1,e.y+1)))}return o(t,[{key:"draw",value:function(t){t.fillStyle="#ffffff",t.fillRect(this.origin.x,this.origin.y,1,1)}},{key:"simulate",value:function(){}}]),t}();i.default=y},{"../aabb":2,"../physics-body":10,victor:1}],5:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=t("../aabb"),s=r(a),u=t("victor"),h=r(u),c=t("../physics-body"),l=r(c),y=.5,f=1,p=8,d=9.82,x={LEFT:["arrowleft","a"],RIGHT:["arrowright","d"],DOWN:["arrowdown","s"],JUMP:["arrowup","w"],ATTACK:[" "]},v=function(){function t(e){n(this,t),this.name="Player";var i=(0,h.default)(e.x-y/2,e.y),r=(0,h.default)(e.x+y/2,e.y+f),o=new s.default(i,r);this.physicsBody=new l.default(o),this.recordKeyDown=this.recordKeyDown.bind(this),this.recordKeyUp=this.recordKeyUp.bind(this),this.keyStates={},this.leftSpeed=0,this.rightSpeed=0,this.enable()}return o(t,[{key:"draw",value:function(t){var e=this.physicsBody.aabb.lowerLeft;t.fillStyle="#00FF00",t.fillRect(e.x,e.y,y,f)}},{key:"processAction",value:function(t,e){var i=this.physicsBody.velocity;switch(t){case"LEFT":this.leftSpeed=e?-p:0;break;case"RIGHT":this.rightSpeed=e?p:0;break;case"JUMP":e&&(i.y=0===i.y?d:i.y);break;case"ATTACK":}}},{key:"processInput",value:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=Object.keys(x)[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value,a=!1,s=!0,u=!1,h=void 0;try{for(var c,l=x[o][Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var y=c.value;if(this.keyStates[y]){a=!0;break}}}catch(t){u=!0,h=t}finally{try{!s&&l.return&&l.return()}finally{if(u)throw h}}this.processAction(o,a)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}this.physicsBody.velocity.x=this.leftSpeed+this.rightSpeed}},{key:"simulate",value:function(){this.processInput()}},{key:"decodeKey",value:function(t){if(void 0!==t.key)return t.key.toLowerCase();throw new Error("Browser must currently support .key property on KeyboardEvent")}},{key:"recordKeyDown",value:function(t){this.keyStates[this.decodeKey(t)]=!0}},{key:"recordKeyUp",value:function(t){this.keyStates[this.decodeKey(t)]=!1}},{key:"enable",value:function(){window.addEventListener("keydown",this.recordKeyDown),window.addEventListener("keyup",this.recordKeyUp)}},{key:"disable",value:function(){window.removeEventListener("keydown",this.recordKeyDown),window.removeEventListener("keyup",this.recordKeyUp)}}]),t}();i.default=v},{"../aabb":2,"../physics-body":10,victor:1}],6:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=t("./config"),a=function(){function t(e,i){r(this,t),this.canvas=e,this.ctx=e.getContext("2d"),this.stopping=!1,this.renderLoop=this.renderLoop.bind(this),this.simulationLoop=this.simulationLoop.bind(this),this.resizeCanvas=this.resizeCanvas.bind(this),this.lastFrameTime=Date.now(),this.FPS=0,this.sceneStack=[],i&&this.pushScene(i)}return n(t,[{key:"pushScene",value:function(t){this.sceneStack.push(t),t.container=this}},{key:"resizeCanvas",value:function(){if(this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.height){var t=this.width/this.height;t>o.ASPECT_RATIO?this.width=o.ASPECT_RATIO*this.height:this.height=this.width/o.ASPECT_RATIO}}},{key:"preDraw",value:function(){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.translate((this.canvas.width-this.width)/2,(this.canvas.height-this.height)/2),this.ctx.save()}},{key:"postDraw",value:function(){this.ctx.restore();var t=Date.now();this.ctx.fillStyle="#FF0000",this.ctx.textAlign="right",this.ctx.font="16px sans-serif",this.FPS=.9*this.FPS+.1*(t-this.lastFrameTime);var e="FPS: "+Math.round(1e3/this.FPS),i=!0,r=!1,n=void 0;try{for(var o,a=this.sceneStack[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var s=o.value;if(s.entities){var u=s.entities.find(function(t){return"Player"===t.name});e="Player Pos: "+u.physicsBody.x.toFixed(2)+", "+u.physicsBody.y.toFixed(2)+" | "+("Player Velocity: "+u.physicsBody.velocity.x.toFixed(2)+", "+u.physicsBody.velocity.y.toFixed(2)+" | ")+("Player Accel: "+u.physicsBody.accel.x.toFixed(2)+", "+u.physicsBody.accel.y.toFixed(2)+" | ")+("currentID: "+u.physicsBody.currentID+" | ")+e}}}catch(t){r=!0,n=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw n}}this.ctx.fillText(e,this.width-10,16),this.lastFrameTime=t}},{key:"renderLoop",value:function(){this.preDraw();var t=!0,e=!1,i=void 0;try{for(var r,n=this.sceneStack[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value;o.draw(this.ctx)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}this.postDraw(),this.stopping||window.requestAnimationFrame(this.renderLoop)}},{key:"simulationLoop",value:function(){var t=window.performance.now(),e=!0,i=!1,r=void 0;try{for(var n,a=this.sceneStack[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=n.value;s.simulate()}}catch(t){i=!0,r=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw r}}var u=window.performance.now();this.stopping||setTimeout(this.simulationLoop,Math.max(0,o.SIMULATION_TIMESTEP-(u-t)))}},{key:"start",value:function(){this.stopping=!1,window.requestAnimationFrame(this.renderLoop),this.simulationLoop(),window.addEventListener("resize",this.resizeCanvas),this.resizeCanvas()}},{key:"stop",value:function(){this.stopping=!0,window.removeEventListener("resize",this.resizeCanvas)}}]),t}();i.default=a},{"./config":3}],7:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=t("./entities/player"),s=r(a),u=t("./entities/platform"),h=r(u),c=t("victor"),l=r(c),y=t("./viewport"),f=r(y),p=t("./physics"),d=r(p),x=t("./utils"),v=t("./config"),b=(0,x.findAppropriateWidth)(v.UNITS_TALL),w=function(){function t(e){var i=this;n(this,t),this.entities=[];var r=0,o=!0,a=!1,u=void 0;try{for(var c,y=e[Symbol.iterator]();!(o=(c=y.next()).done);o=!0){var p=c.value;r=p.length>r?p.length:r}}catch(t){a=!0,u=t}finally{try{!o&&y.return&&y.return()}finally{if(a)throw u}}this.physics=new d.default([e.length,r],v.SIMULATION_TIMESTEP),e.forEach(function(t,e){e=v.UNITS_TALL-e,Array.prototype.forEach.call(t,function(t,r){var n=new h.default((0,l.default)(0,0));switch(t.toLowerCase()){case"x":n=new h.default((0,l.default)(r,e)),i.entities.push(n),i.physics.addBody(n.physicsBody);break;case"p":i.player=new s.default((0,l.default)(r,e)),i.physics.addBody(i.player.physicsBody),i.entities.push(i.player)}})}),this.viewport=new f.default((0,l.default)(b/2,v.UNITS_TALL/2),v.UNITS_TALL,1),this.showViewport=!0}return o(t,[{key:"_preDraw",value:function(){this.container.ctx.scale(this.container.height/v.UNITS_TALL,-1*this.container.height/v.UNITS_TALL),this.container.ctx.translate(0,-v.UNITS_TALL);var t=b/this.viewport.aabb.width,e=v.UNITS_TALL/this.viewport.aabb.height;this.container.ctx.scale(t,e),this.container.ctx.translate(-this.viewport.aabb.lowerLeft.x,-this.viewport.aabb.lowerLeft.y),this.container.ctx.save()}},{key:"_postDraw",value:function(){this.showViewport&&(this.container.ctx.fillStyle="rgba(255, 255, 255, 0.1)",this.container.ctx.fillRect(this.viewport.aabb.lowerLeft.x,this.viewport.aabb.lowerLeft.y,this.viewport.aabb.width,this.viewport.aabb.height)),this.container.ctx.restore()}},{key:"draw",value:function(){this._preDraw();var t=this.container.ctx,e=!0,i=!1,r=void 0;try{for(var n,o=this.entities[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;a.draw(t)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}this._postDraw()}},{key:"simulate",value:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=this.entities[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value;o.simulate()}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}this.viewport.updateViewport(this.player.physicsBody),this.physics.resolveArea(this.viewport.physicsBody)}}]),t}();i.default=w},{"./config":3,"./entities/platform":4,"./entities/player":5,"./physics":11,"./utils":13,"./viewport":14,victor:1}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=["                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","                                                                                                                                       ","       xxxxxxxxx    x                                                                                                                  ","                                                                                                                                       ","    P                                                                                                                                  ","xxxxxxx x x x x xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"];i.default=r},{}],9:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var n=t("./level"),o=r(n),a=t("./game-container"),s=r(a),u=t("./levels/test"),h=r(u),c=document.getElementById("gameCanvas-layer0"),l=new s.default(c);l.pushScene(new o.default(h.default)),l.start()},{"./game-container":6,"./level":7,"./levels/test":8}],10:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=t("./aabb"),s=r(a),u=t("victor"),h=r(u),c=function(){function t(e){n(this,t),this.aabb=e,this.velocity=(0,h.default)(0,0),this.accel=(0,h.default)(0,0),this.inView=!1}return o(t,[{key:"clone",value:function(){var e=new t(new s.default(this.lowerLeft.clone(),this.upperRight.clone()),new h.default(this.x,this.y));return e.velocity=this.velocity.clone(),e.accel=this.accel.clone(),e.inVew=this.inView,e}},{key:"x",get:function(){return this.aabb.lowerLeft.x}},{key:"y",get:function(){return this.aabb.lowerLeft.y}},{key:"w",get:function(){return this.aabb.width}},{key:"h",get:function(){return this.aabb.height}}]),t}();i.default=c},{"./aabb":2,victor:1}],11:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=t("./aabb"),s=(r(a),t("./physics-body")),u=(r(s),t("./quadtree")),h=r(u),c=t("victor"),l=r(c),y=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:9.82;n(this,t),this.physicsBodyArr=new Array,this.timeStepFactor=i/1e3,this.gravity=r,this.quadTree=new h.default((0,l.default)(0,0),(0,l.default)(e[0],e[1])),this.iDCount=0}return o(t,[{key:"addBody",value:function(t){this.iDCount++,t.currentID=this.iDCount,this.physicsBodyArr.push(t),this.quadTree.put(t)}},{key:"resolveArea",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=this.physicsBodyArr[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;a.inview=a.aabb.collisionWith(t.aabb),this.resolveBody(a)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}return this}},{key:"resolveBody",value:function(t){if(t.velocity.add((0,l.default)(0,(t.accel.y-this.gravity)*this.timeStepFactor)),0!==t.velocity.y){this.quadTree.remove(t,"currentID"),t.aabb.add((0,l.default)(0,t.velocity.y*this.timeStepFactor)),this.quadTree.put(t);var e=this.quadTree.get(t),i=!0,r=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;i&&(u.currentID!==t.currentID&&t.aabb.collisionWith(u.aabb)?(this.quadTree.remove(t,"currentID"),t.aabb.subtract((0,l.default)(0,t.velocity.y*this.timeStepFactor)),t.velocity.y=0,this.quadTree.put(t),i=!1):i=!0)}}catch(t){n=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}}if(t.velocity.add((0,l.default)(t.accel.x*this.timeStepFactor,0)),0!==t.velocity.x){this.quadTree.remove(t,"currentID"),t.aabb.add((0,l.default)(t.velocity.x*this.timeStepFactor,0)),this.quadTree.put(t);var h=this.quadTree.get(t),c=!0,y=!0,f=!1,p=void 0;try{for(var d,x=h[Symbol.iterator]();!(y=(d=x.next()).done);y=!0){var v=d.value;c&&(v.currentID!==t.currentID&&this.collides(t,v)?(this.quadTree.remove(t,"currentID"),t.aabb.subtract((0,l.default)(t.velocity.x*this.timeStepFactor,0)),t.velocity.x=0,this.quadTree.put(t),c=!1):c=!0)}}catch(t){f=!0,p=t}finally{try{!y&&x.return&&x.return()}finally{if(f)throw p}}}return t.y<0&&(this.quadTree.remove(t,"currentID"),t.aabb.position=(0,l.default)(t.x,0),t.velocity.y=0,this.quadTree.put(t)),t.x<0&&(this.quadTree.remove(t,"currentID"),t.aabb.position=(0,l.default)(0,t.y),t.velocity.x=0,this.quadTree.put(t)),this}},{key:"collides",value:function(t,e){return t.x<e.x+e.w&&t.x+t.w>e.x&&t.y<e.y+e.h&&t.y+t.h>e.y}}]),t}();i.default=y},{"./aabb":2,"./physics-body":10,"./quadtree":12,victor:1}],12:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=t("./aabb"),s=r(a),u=t("victor"),h=r(u),c=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this._aabb=e,this._maxObjects=i,this._maxLevels=r,this._nodeArr=new Array,this._objectArr=new Array,this._level=o}return o(t,[{key:"put",value:function(t){if(this._nodeArr.length>0){var e=this._getIndex(t);e!==-1&&this._nodeArr[e].put(t)}this._objectArr.push(t),this._objectArr.length>this._maxObjects&&this._level<this._maxLevels&&this._split()}},{key:"get",value:function(t){var e=this._getIndex(t);return e!==-1&&this._nodeArr.length>0?this._nodeArr[e].get(t):this._objectArr}},{key:"remove",value:function(t,e){var i=this._objectArr.findIndex(function(i){return i[e]===t[e]});if(i!==-1)return this._objectArr.splice(i,1),1;var r=!0,n=!1,o=void 0;try{for(var a,s=this._nodeArr[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;if(1===u.remove(t,e))return 1}}catch(t){n=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}}},{key:"_split",value:function(){var e=(0,h.default)(this._aabb.width/2,this._aabb.height/2);this._nodeArr.push(new t(new s.default((0,h.default)(this._aabb.x+e.x,this._aabb.y),e),this._maxObjects,this._maxLevels,this._level+1)),this._nodeArr.push(new t(new s.default((0,h.default)(this._aabb.x,this._aabb.y),e),this._maxObjects,this._maxLevels,this._level+1)),this._nodeArr.push(new t(new s.default((0,h.default)(this._aabb.x,this._aabb.y+e.y),e),this._maxObjects,this._maxLevels,this._level+1)),this._nodeArr.push(new t(new s.default((0,h.default)(this._aabb.x+e.x,this._aabb.y+e.y),e),this._maxObjects,this._maxLevels,this._level+1));for(var i=0;i<this._objectArr.length;){var r=this._getIndex(this._objectArr[i]);r!==-1?this._nodeArr[r].put(this._objectArr.splice(i,1)):i++}}},{key:"_getIndex",value:function(t){var e=-1,i=(0,h.default)(this._aabb.x+this._aabb.width/2,this._aabb.y+this._aabb.height/2);return t.x+t.w<i.x?t.y>i.y?e=1:t.y+t.h<i.y&&(e=2):t.x>i.x&&(t.y>i.y?e=0:t.y+t.h<i.y&&(e=3)),e}}]),t}();i.default=c},{"./aabb":2,victor:1}],13:[function(t,e,i){"use strict";function r(t){return n.ASPECT_RATIO*t}Object.defineProperty(i,"__esModule",{value:!0}),i.findAppropriateWidth=r;var n=t("./config")},{"./config":3}],14:[function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=t("./utils"),s=t("./aabb"),u=r(s),h=t("victor"),c=r(h),l=t("./physics-body"),y=r(l),f=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;n(this,t);var o=(0,a.findAppropriateWidth)(i);this.aabb=new u.default((0,c.default)(e.x-o/2,e.y-i/2),(0,c.default)(e.x+o/2,e.y+i/2)),this.physicsBody=new y.default(this.aabb),this.buffer=r}return o(t,[{key:"updateViewport",value:function(t){var e=t.aabb,i=e.upperRight,r=e.lowerLeft,n=(0,c.default)(0,0);i.x+this.buffer>this.aabb.upperRight.x?n.x=i.x+this.buffer-this.aabb.upperRight.x:r.x-this.buffer<this.aabb.lowerLeft.x&&(n.x=r.x-this.buffer-this.aabb.lowerLeft.x),i.y+this.buffer>this.aabb.upperRight.y?n.y=i.y+this.buffer-this.aabb.upperRight.y:r.y-this.buffer<this.aabb.lowerLeft.y&&(n.y=r.y-this.buffer-this.aabb.lowerLeft.y),this.aabb.add(n)}}]),t}();i.default=f},{"./aabb":2,"./physics-body":10,"./utils":13,victor:1}]},{},[9]);
//# sourceMappingURL=app.js.map
